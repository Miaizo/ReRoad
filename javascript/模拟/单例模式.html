<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>单例模式</title>
</head>
<body>
  <script>
    // class Storage {
    //   static getInstance () {
    //     if (!Storage.instance) {
    //       Storage.instance = new Storage()
    //     }
    //     return Storage.instance
    //   }
    //   get (key) {
    //     return localStorage.getItem(key)
    //   }
    //   set (key, value) {
    //     return localStorage.setItem(key, value)
    //   }
    // }

    // const s1 = new Storage()
    // const s2 = new Storage()

    // console.log(s1.set('zbc', 'xxx'))
    // console.log(s2.get('zbc'))

    function StorageBase () {}

    StorageBase.prototype.get = function (key) {
      return localStorage.getItem(key)
    }
    StorageBase.prototype.set = function (key, value) {
      return localStorage.setItem(key, value)
    }

    const Storage = (function () {
      let instance = null
      return function () {
        if (!instance) {
          instance = new StorageBase()
        }
        return instance
      }
    }())

    const s1 = Storage()
    const s2 = Storage()

    console.log(s1.set('zbc', 'xxx'))
    console.log(s2.get('zbc'))

    console.log(s1 === s2)
  </script>
</body>
</html>